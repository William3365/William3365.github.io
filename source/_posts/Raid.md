---
title: Raid
date: 2023-08-23 09:45:15
tags: Raid
---
# RAID

* QA
  * 为什么要做raid？
    * 花小钱办大事，提供容错机制

## 基础概念

* RAID，独立（廉价）冗余磁盘阵列，简称磁盘阵列，一种多磁盘管理技术

* 用多个独立的磁盘组成在一起形成一个大的磁盘系统，从而实现比单块磁盘更好的存储性能和更高的可靠性。

* 技术架构：数据条带、镜像、数据校验技术

  * 根据运用或组合运用这三种技术的策略和架构，可以把 RAID 分为不同的等级，以满足不同数据应用的需求

  * RAID0 - RAID6 七个等级，还有组合raid

    * 标准 RAID 等级各有优势和不足。把多个 RAID 等级组合起来，实现互补，组合等级的实现成本一般都非常昂贵，只是在 少数特定场合应用

  * 在实际应用领域中使用最多的 RAID 等级是 RAID0 、 RAID1 、 RAID3 、 RAID5 、 RAID6 和 RAID10、RAID01。

  * 每一个等级代表一种实现方法和技术，等级之间并无高低之分。在实际应用中，应当根据用户的数据应用特点，综合考虑可用性、性能和成本来选择合适的 RAID 等级，以及具体的实现方式。

* 区分：

  * 软 RAID，

    ```
    无独立的RAID控制卡，由操作系统和CPU来实现所有的RAID功能。
    
    占用CPU资源，如果操作系统出现故障，则RAID信息会丢失，RAID功能将不可用。
    
    跟硬RAID比性能差，但成本低。
    ```

  * 硬 RAID 

    ```
    拥有独立的RAID控制卡，通过RAID卡实现所有的RAID功能，不占用CPU资源。
    
    性能好，但成本高。
    ```

  * 软硬混合 RAID ，成本、性能居中

* 热备盘

  * 当损坏的盘超出限制，热备盘就会临时顶替掉损坏的磁盘，继续维持原来的数据正常运转，相当于磁盘的最后一层保险

* raid0

  * 最少要用两个磁盘（偶数数量的磁盘），一般不单独使用
  * 读写性能最高，100%的磁盘空间利用率
  * 不提供数据冗余保护，一旦数据损坏，将无法恢复。
  * 视频、音频存储、打印等

* raid1

  * 最少要用两个磁盘（偶数数量的磁盘）
  * 数据安全性最高，镜像储存（互为备份），无校验。
  * 成本高，磁盘空间利用率为50%，一半的空间用于存储冗余数据
  * 邮件、数据库

* raid3

  * 最少三块盘
  * 如影像处理、流媒体服务等

* raid5

  * 最少3块
  * 读取性能相对高，磁盘空间利用率大于RAID 10，允许1个物理磁盘发生故障，而不丢失数据（可以理解为 RAID0 和 RAID1 的折中方案，是目前综合性能最佳的数据保护解决方案）
  * 写入性能相对低，重建数据时，性能会受到较大的影响
  * 适用于金融、数据库等

* raid6

  * 最少四块硬盘
  * 读取性能较高，磁盘空间利用率大于RAID 10，允许2个物理磁盘发生故障，而不丢失数据
  * 成本高于RAID 5，写入性能较低（低于RAID 5）
  * 对数据安全要求非常高、成本同样重要的场景，它一般是替代RAID 10经济性选择。如金融、数据库等

* raid10

  * 最少四块硬盘
  * RAID 1与RAID 0的结合，先创建RAID 1，再创建RAID 0
  * 读取性能仅次于RAID 0，磁盘没有全部故障，数据就不会丢失。一半磁盘故障时，仍可正常运转
  * 成本高。磁盘空间利用率50%，一半的空间用于存储冗余数据
  * 于读写性能要求高，数据安全大于磁盘成本的场景。如银行、数据库等。


## raid选型

* 从I/O性能、成本、容错三个因素来选择

  ```
  如果不考虑容错，选择RAID 0可获得高I/O性能。
  
  如果I/O性能、容错都重要，而成本不是主要因素，可选择RAID 1。
  
  如果I/O性能、成本、容错都重要，则根据磁盘数、可用容量、允许故障硬盘数选择RAID 5、RAID 6、RAID 10、RAID 50或RAID 60
  
  容量>性能，raid50、raid10
  数据保护，raid6、raid60
  
  ```

  

## 注意事项

* 组建RAID时，建议使用硬盘型号、容量完全一样的企业级硬盘。

* 组建RAID会删除硬盘上的所有数据，如有需要请先备份硬盘上的旧数据。

* 已组建RAID的硬盘上存有残留的RAID信息，如需再次组建RAID，需先清除这些信息。

* 先做raid，再做系统
  
* boot模式先选bios，改raid模式，再进perc配置raid，最后再改成uefi（最后可有可无）

* 做好raid，重装系统之后，重启可能读不到hard-disk，去把sata模式调为ahci模式

* raid和non-raid
  * 不做raid的时候，改成non-raid，这样就可以被系统直接识别
  * non-raid非阵列模式（普通模式），即可独立识别每一块磁盘







## 配置Raid

1、检查硬件，可正常工作、安装连接无误

2、system setting -》sata setting -》选择raid mode

3、boot setting -》选择UEFI

4、在F2 device settings配置也行，

​	  F10生命周期控制器中配置也行（和F2一样，但是可选中文）

​	  ctrl+R进入perc中配置也行

5、进入了 device setting，选择 XXXX configuration utility

6、进入了configuration options，选择controller management，选择rescan disks，进行读盘

7、根据读盘结果，按需将磁盘转为raid或no-raid

8、进入virtual disk management，进行虚拟磁盘查看、选择、配置，raid等级、盘数、read、write、cache按需配置

9、查看虚拟磁盘配置结果，ready（可用配置raid），online（可用在线）



